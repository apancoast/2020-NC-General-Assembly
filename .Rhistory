View()
View(entity_donors)
entity_donors %>%
mutate(across(
everything(),
str_replace_all,
c("10th Cong Dist Gop","10th Cong Dist Republican Party","10th District Republican Party","10th District Repulican Party"),
"10th Congressional District Republican Party"))  %>%
arrange(donor_name) %>%
View()
entity_donors %>%
mutate(across(
everything(),
str_replace,
c("10th Cong Dist Gop","10th Cong Dist Republican Party","10th District Republican Party","10th District Repulican Party"),
"10th Congressional District Republican Party")) %>%
View()
entity_donors %>%
mutate(across(
everything(),
str_replace,
c("10th District Repulican Party","10th Cong Dist Gop","10th Cong Dist Republican Party","10th District Republican Party","10th District Repulican Party"),
"10th Congressional District Republican Party")) %>%
View()
entity_donors %>%
mutate(across(
everything(),
gsub,
pattern = "[10th District Repulican Party","10th Cong Dist Gop","10th Cong Dist Republican Party","10th District Republican Party","10th District Repulican Party]"),
"10th Congressional District Republican Party") %>%
View()
entity_donors %>%
mutate(across(
everything(),
gsub,
pattern = "[10th District Repulican Party|10th Cong Dist Gop|10th Cong Dist Republican Party|10th District Republican Party|10th District Repulican Party]"),
"10th Congressional District Republican Party") %>%
View()
entity_donors %>%
mutate(across(
everything(),
gsub,
pattern = "10th District Repulican Party|10th Cong Dist Gop|10th Cong Dist Republican Party|10th District Republican Party|10th District Repulican Party"),
"10th Congressional District Republican Party") %>%
View()
entity_donors %>%
mutate(donor_name = str_replace_all("10th District Repulican Party|10th Cong Dist Gop|10th Cong Dist Republican Party|10th District Republican Party|10th District Repulican Party"),
"10th Congressional District Republican Party") %>%
View()
str_replace_all("10th District Repulican Party|10th Cong Dist Gop|10th Cong Dist Republican Party|10th District Republican Party|10th District Repulican Party",
entity_donors %>%
mutate(donor_name =
str_replace_all("10th District Repulican Party|10th Cong Dist Gop|10th Cong Dist Republican Party|10th District Republican Party|10th District Repulican Party",
"10th Congressional District Republican Party")) %>%
View()
entity_donors %>%
mutate(donor_name =
str_replace_all("10th District Repulican Party|10th Cong Dist Gop|10th Cong Dist Republican Party|10th District Republican Party|10th District Repulican Party",
"10th Congressional District Republican Party")) %>%
View()
entity_donors %>%
mutate(donor_name =
str_replace_all(donor_name, "10th District Repulican Party|10th Cong Dist Gop|10th Cong Dist Republican Party|10th District Republican Party|10th District Repulican Party",
"10th Congressional District Republican Party")) %>%
View()
entity_donors %>%
mutate_all(
str_replace_all(
donor_name,
"10th District Repulican Party|10th Cong Dist Gop|10th Cong Dist Republican Party|10th District Republican Party|10th District Repulican Party",
"10th Congressional District Republican Party")
) %>%
View()
entity_donors %>%
mutate(across(
str_replace_all(
donor_name,
"10th District Repulican Party|10th Cong Dist Gop|10th Cong Dist Republican Party|10th District Republican Party|10th District Repulican Party",
"10th Congressional District Republican Party")
)) %>%
View()
entity_donors %>%
mutate(donor_name=
str_replace_all(
donor_name,
"10th District Repulican Party|10th Cong Dist Gop|10th Cong Dist Republican Party|10th District Republican Party|10th District Repulican Party",
"10th Congressional District Republican Party"),
donor_name=
str_replace_all(
donor_name,
"3rd District Republican Party|3rd Cong District Republican",
"3rd Congressional District Republican Party")
) %>%
View()
entity_donors %>%
mutate(donor_name=
str_replace_all(
donor_name,
"10th District Repulican Party|10th Cong Dist Gop|10th Cong Dist Republican Party|10th District Republican Party|10th District Repulican Party",
"10th Congressional District Republican Party"),
donor_name=
str_replace_all(
donor_name,
"3m Company Politcal Action Committee|3m PAC|3m Politcal Action Committee",
"3M Co PAC"),
donor_name=
str_replace_all(
donor_name,
"3rd District Republican Party|3rd Cong District Republican",
"3rd Congressional District Republican Party")
) %>%
View()
entity_donors %>%
mutate(donor_name=
str_replace_all(
donor_name,
"10th District Repulican Party|10th Cong Dist Gop|10th Cong Dist Republican Party|10th District Republican Party|10th District Repulican Party",
"10th Congressional District Republican Party"),
donor_name=
str_replace_all(
donor_name,
"3m Company Politcal Action Committee|3m PAC|3m Politcal Action Committee",
"3M Co PAC"),
donor_name=
str_replace_all(
donor_name,
"3rd District Republican Party|3rd Cong District Republican",
"3rd Congressional District Republican Party"),
donor_name=
str_replace_all(
donor_name,
"Apartment Association of North Carolina --- Aanc PAC|Apartment Association of North Carolina|Apartment Association of NC PAC|
Apartment Association of NC Aanc PAC|Apartment Association of NC|Apartment Assoc of North Carolina PAC|Apartment Assoc of NC PAC|Apartment Assoc of NC|Apartment Ass of NC",
"Apartment Association of North Carolina PAC")
) %>%
View()
entity_donors %>%
mutate(donor_name=
str_replace_all(
donor_name,
"10th District Repulican Party|10th Cong Dist Gop|10th Cong Dist Republican Party|10th District Republican Party|10th District Repulican Party",
"10th Congressional District Republican Party"),
donor_name=
str_replace_all(
donor_name,
"3m Company Politcal Action Committee|3m PAC|3m Politcal Action Committee",
"3M Co PAC"),
donor_name=
str_replace_all(
donor_name,
"3rd District Republican Party|3rd Cong District Republican",
"3rd Congressional District Republican Party"),
donor_name=
str_replace_all(
donor_name,
"Apartment Association of North Carolina --- Aanc PAC|Apartment Association of North Carolina|Apartment Association of NC PAC|
Apartment Association of NC Aanc PAC|Apartment Association of NC|Apartment Assoc of North Carolina PAC|Apartment Assoc of NC PAC|Apartment Assoc of NC|Apartment Ass of NC|Apartment Association of North Carolina PAC Aanc PAC|Apartment Association of North Carolina PAC",
"Apartment Association of North Carolina PAC")
) %>%
View()
entity_donors %>%
mutate(donor_name=
str_replace_all(
donor_name,
"10th District Repulican Party|10th Cong Dist Gop|10th Cong Dist Republican Party|10th District Republican Party|10th District Repulican Party",
"10th Congressional District Republican Party"),
donor_name=
str_replace_all(
donor_name,
"3m Company Politcal Action Committee|3m PAC|3m Politcal Action Committee",
"3M Co PAC"),
donor_name=
str_replace_all(
donor_name,
"3rd District Republican Party|3rd Cong District Republican",
"3rd Congressional District Republican Party"),
donor_name=
str_replace_all(
donor_name,
"Apartment Association of North Carolina --- Aanc PAC|Apartment Association of North Carolina|Apartment Association of NC PAC|
Apartment Association of NC Aanc PAC|Apartment Association of NC|Apartment Assoc of North Carolina PAC|Apartment Assoc of NC PAC|Apartment Assoc of NC|Apartment Ass of NC|Apartment Association of North Carolina PAC Aanc PAC",
"Apartment Association of North Carolina PAC")
) %>%
View()
entity_donors %>%
mutate(donor_name=
str_replace_all(
donor_name,
"10th District Repulican Party|10th Cong Dist Gop|10th Cong Dist Republican Party|10th District Republican Party|10th District Repulican Party",
"10th Congressional District Republican Party"),
donor_name=
str_replace_all(
donor_name,
"3m Company Politcal Action Committee|3m PAC|3m Politcal Action Committee",
"3M Co PAC"),
donor_name=
str_replace_all(
donor_name,
"3rd District Republican Party|3rd Cong District Republican",
"3rd Congressional District Republican Party"),
donor_name=
str_replace_all(
donor_name,
"Apartment Association of North Carolina \\--- Aanc PAC|Apartment Association of North Carolina|Apartment Association of NC PAC|
Apartment Association of NC Aanc PAC|Apartment Association of NC|Apartment Assoc of North Carolina PAC|Apartment Assoc of NC PAC|Apartment Assoc of NC|Apartment Ass of NC|Apartment Association of North Carolina PAC Aanc PAC",
"Apartment Association of North Carolina PAC")
) %>%
View()
entity_donors %>%
mutate(donor_name=
str_replace_all(
donor_name,
"10th District Repulican Party|10th Cong Dist Gop|10th Cong Dist Republican Party|10th District Republican Party|10th District Repulican Party",
"10th Congressional District Republican Party"),
donor_name=
str_replace_all(
donor_name,
"3m Company Politcal Action Committee|3m PAC|3m Politcal Action Committee",
"3M Co PAC"),
donor_name=
str_replace_all(
donor_name,
"3rd District Republican Party|3rd Cong District Republican",
"3rd Congressional District Republican Party"),
donor_name=
str_replace_all(
donor_name,
"Apartment Association of North Carolina --- Aanc PAC|Apartment Association of North Carolina|Apartment Association of NC PAC|
Apartment Association of NC Aanc PAC|Apartment Association of NC|Apartment Assoc of North Carolina PAC|Apartment Assoc of NC PAC|Apartment Assoc of NC|Apartment Ass of NC|Apartment Association of North Carolina PAC Aanc PAC",
"Apartment Association of North Carolina")
) %>%
View()
entity_donors %>%
mutate(donor_name=
str_replace_all(
donor_name,
"10th District Repulican Party|10th Cong Dist Gop|10th Cong Dist Republican Party|10th District Republican Party|10th District Repulican Party",
"10th Congressional District Republican Party"),
donor_name=
str_replace_all(
donor_name,
"3m Company Politcal Action Committee|3m PAC|3m Politcal Action Committee",
"3M Co PAC"),
donor_name=
str_replace_all(
donor_name,
"3rd District Republican Party|3rd Cong District Republican",
"3rd Congressional District Republican Party"),
donor_name=
str_replace_all(
donor_name,
"Apartment Association of North Carolina --- Aanc PAC|Apartment Association of North Carolina|Apartment Association of NC PAC|Apartment Association of NC Aanc PAC|Apartment Association of NC|Apartment Assoc of North Carolina PAC|Apartment Assoc of NC PAC|Apartment Assoc of NC|Apartment Ass of NC|Apartment Association of North Carolina PAC Aanc PAC",
"Apartment Association of North Carolina")
) %>%
View()
entity_donors %>%
mutate(donor_name=
str_replace_all(
donor_name,
"Apartment Association of North Carolina --- Aanc PAC|Apartment Association of North Carolina|Apartment Association of NC PAC|Apartment Association of NC Aanc PAC|Apartment Association of NC|Apartment Assoc of North Carolina PAC|Apartment Assoc of NC PAC|Apartment Assoc of NC|Apartment Ass of NC|Apartment Association of North Carolina PAC Aanc PAC|Apartment Association of North Carolina PAC",
"Apartment Association of North Carolina PAC")
) %>%
View()
entity_donors %>%
mutate(donor_name=
str_replace_all(
donor_name,
"Apartment Association of North Carolina --- Aanc PAC|Apartment Association of North Carolina|Apartment Association of NC PAC|Apartment Association of NC Aanc PAC|Apartment Association of NC|Apartment Assoc of North Carolina PAC|Apartment Assoc of NC PAC|Apartment Assoc of NC|Apartment Ass of NC|Apartment Association of North Carolina PAC Aanc PAC|Apartment Association of North Carolina PAC",
"Apartment Association of North Carolina")
) %>%
View()
entity_donors <-
entity_donors %>%
mutate(donor_name=
str_replace_all(
donor_name,
"10th District Repulican Party|10th Cong Dist Gop|10th Cong Dist Republican Party|10th District Republican Party|10th District Repulican Party",
"10th Congressional District Republican Party"),
donor_name=
str_replace_all(
donor_name,
"3m Company Politcal Action Committee|3m PAC|3m Politcal Action Committee",
"3M Co PAC"),
donor_name=
str_replace_all(
donor_name,
"3rd District Republican Party|3rd Cong District Republican",
"3rd Congressional District Republican Party")
)
View(entity_donors)
nc_ga_2020_elected <- read.csv("D:/RStudio/state_congress/CSVs/nc_ga_2020_elected.csv")
donors <- read.csv("D:/RStudio/state_congress/CSVs/donors.csv") %>%
select( -matches("X")) %>%
rename(tot_to_candidate = donations_total,
tot_from_donor = Total.Donations..Click.to.sort.Ascending.,
donor_name = Donor..Click.to.sort.Ascending.,
donor_type = Type..Click.to.sort.Descending.
) %>%
mutate(across(everything(), gsub, pattern = "[\\$,]", replacement = "")) %>%
left_join(nc_ga_2020_elected) %>%
select( -matches("X")) %>%
mutate(tot_to_candidate = as.numeric(tot_to_candidate),
tot_from_donor = as.numeric(tot_from_donor)
)
#gotta clean entity donors
entity_donors <- donors %>%
filter(donor_type == "ENTITY") %>%
select(district,member,tot_from_donor,donor_name) %>%
arrange(donor_name)
entity_donors %>%
distinct(donor_name)
entity_donors %>%
distinct(donor_name) %>%
count()
library(tidyverse)
# Exploring Donors ----
#let's get that table real purrrty
nc_ga_2020_elected <- read.csv("D:/RStudio/state_congress/CSVs/nc_ga_2020_elected.csv")
donors <- read.csv("D:/RStudio/state_congress/CSVs/donors.csv") %>%
select( -matches("X")) %>%
rename(tot_to_candidate = donations_total,
tot_from_donor = Total.Donations..Click.to.sort.Ascending.,
donor_name = Donor..Click.to.sort.Ascending.,
donor_type = Type..Click.to.sort.Descending.
) %>%
mutate(across(everything(), gsub, pattern = "[\\$,]", replacement = "")) %>%
left_join(nc_ga_2020_elected) %>%
select( -matches("X")) %>%
mutate(tot_to_candidate = as.numeric(tot_to_candidate),
tot_from_donor = as.numeric(tot_from_donor)
)
#gotta clean entity donors
entity_donors <- donors %>%
filter(donor_type == "ENTITY") %>%
select(district,member,tot_from_donor,donor_name) %>%
arrange(donor_name)
entity_donors %>%
distinct(donor_name) %>%
count()
entity_donors <-
entity_donors %>%
mutate(donor_name=
str_replace_all(
donor_name,
"10th District Repulican Party|10th Cong Dist Gop|10th Cong Dist Republican Party|10th District Republican Party|10th District Repulican Party",
"10th Congressional District Republican Party"),
donor_name=
str_replace_all(
donor_name,
"3m Company Politcal Action Committee|3m PAC|3m Politcal Action Committee",
"3M Co PAC"),
donor_name=
str_replace_all(
donor_name,
"3rd District Republican Party|3rd Cong District Republican",
"3rd Congressional District Republican Party")
)
entity_donors %>%
mutate(donor_name=
str_replace_all(
donor_name,
"Apartment Association of North Carolina --- Aanc PAC|Apartment Association of North Carolina|Apartment Association of NC PAC|Apartment Association of NC Aanc PAC|Apartment Association of NC|Apartment Assoc of North Carolina PAC|Apartment Assoc of NC PAC|Apartment Assoc of NC|Apartment Ass of NC|Apartment Association of North Carolina PAC Aanc PAC|Apartment Association of North Carolina PAC",
"Apartment Association of North Carolina")
) %>%
View()
View(entity_donors)
entity_donors %>%
row_number(176:193)
entity_donors %>%
slice(176:193)
entity_donors %>%
slice(176:193) %>%
mutate(donor_name=
str_replace_all(
donor_name,
"Apartment Association of North Carolina --- Aanc PAC|Apartment Association of North Carolina|Apartment Association of NC PAC|Apartment Association of NC Aanc PAC|Apartment Association of NC|Apartment Assoc of North Carolina PAC|Apartment Assoc of NC PAC|Apartment Assoc of NC|Apartment Ass of NC|Apartment Association of North Carolina PAC Aanc PAC|Apartment Association of North Carolina PAC",
"Apartment Association of North Carolina")
) %>%
View()
entity_donors <-
entity_donors %>%
mutate(donor_name=
str_replace_all(
donor_name,
"10th District Repulican Party|10th Cong Dist Gop|10th Cong Dist Republican Party|10th District Republican Party|10th District Repulican Party",
"10th Congressional District Republican Party"),
donor_name=
str_replace_all(
donor_name,
"3m Company Politcal Action Committee|3m PAC|3m Politcal Action Committee",
"3M Co PAC"),
donor_name=
str_replace_all(
donor_name,
"3rd District Republican Party|3rd Cong District Republican",
"3rd Congressional District Republican Party"),
donor_name=
str_replace_all(
donor_name,
"Apartment Association of North Carolina --- Aanc PAC|Apartment Association of North Carolina|Apartment Association of NC PAC|Apartment Association of NC Aanc PAC|Apartment Association of NC|Apartment Assoc of North Carolina PAC|Apartment Assoc of NC PAC|Apartment Assoc of NC|Apartment Ass of NC|Apartment Association of North Carolina PAC Aanc PAC|Apartment Association of North Carolina PAC",
"Apartment Association of North Carolina")
)
donors <- read.csv("D:/RStudio/state_congress/CSVs/donors.csv") %>%
select( -matches("X")) %>%
rename(tot_to_candidate = donations_total,
tot_from_donor = Total.Donations..Click.to.sort.Ascending.,
donor_name = Donor..Click.to.sort.Ascending.,
donor_type = Type..Click.to.sort.Descending.
) %>%
mutate(across(everything(), gsub, pattern = "[\\$,]", replacement = "")) %>%
left_join(nc_ga_2020_elected) %>%
select( -matches("X")) %>%
mutate(tot_to_candidate = as.numeric(tot_to_candidate),
tot_from_donor = as.numeric(tot_from_donor)
)
#gotta clean entity donors
entity_donors <- donors %>%
filter(donor_type == "ENTITY") %>%
select(district,member,tot_from_donor,donor_name) %>%
arrange(donor_name)
entity_donors <-
entity_donors %>%
mutate(donor_name=
str_replace_all(
donor_name,
"10th District Repulican Party|10th Cong Dist Gop|10th Cong Dist Republican Party|10th District Republican Party|10th District Repulican Party",
"10th Congressional District Republican Party"),
donor_name=
str_replace_all(
donor_name,
"3m Company Politcal Action Committee|3m PAC|3m Politcal Action Committee",
"3M Co PAC"),
donor_name=
str_replace_all(
donor_name,
"3rd District Republican Party|3rd Cong District Republican",
"3rd Congressional District Republican Party")
)
#gotta do a lil fix for rows 176:193
entity_donors %>%
slice(176:193) %>%
mutate(donor) %>%
View()
entity_donors %>%
slice(176:193)
#gotta do a lil fix for rows 176:193
entity_donors %>%
slice(176:193) %>%
mutate(donor_name="Apartment Association of North Carolina PAC") %>%
View()
#gotta do a lil fix for rows 176:193
aanc <-
entity_donors %>%
slice(176:193) %>%
mutate(donor_name="Apartment Association of North Carolina PAC")
View(aanc)
test <- left_join(entity_donors, aanc, by="district")
library(data.table)
setDT(entity_donors)
setDT(aanc)
entity_donors[aanc, on=c("district","member"), donor_name := i.donor_name]
View(entity_donors)
nc_ga_2020_elected <- read.csv("D:/RStudio/state_congress/CSVs/nc_ga_2020_elected.csv")
donors <- read.csv("D:/RStudio/state_congress/CSVs/donors.csv") %>%
select( -matches("X")) %>%
rename(tot_to_candidate = donations_total,
tot_from_donor = Total.Donations..Click.to.sort.Ascending.,
donor_name = Donor..Click.to.sort.Ascending.,
donor_type = Type..Click.to.sort.Descending.
) %>%
mutate(across(everything(), gsub, pattern = "[\\$,]", replacement = "")) %>%
left_join(nc_ga_2020_elected) %>%
select( -matches("X")) %>%
mutate(tot_to_candidate = as.numeric(tot_to_candidate),
tot_from_donor = as.numeric(tot_from_donor)
)
#gotta clean entity donors
entity_donors <- donors %>%
filter(donor_type == "ENTITY") %>%
select(district,member,tot_from_donor,donor_name) %>%
arrange(donor_name)
entity_donors %>%
distinct(donor_name) %>%
count()
#result 1667
entity_donors <-
entity_donors %>%
mutate(donor_name=
str_replace_all(
donor_name,
"10th District Repulican Party|10th Cong Dist Gop|10th Cong Dist Republican Party|10th District Republican Party|10th District Repulican Party",
"10th Congressional District Republican Party"),
donor_name=
str_replace_all(
donor_name,
"3m Company Politcal Action Committee|3m PAC|3m Politcal Action Committee",
"3M Co PAC"),
donor_name=
str_replace_all(
donor_name,
"3rd District Republican Party|3rd Cong District Republican",
"3rd Congressional District Republican Party")
)
#gotta do a lil fix for rows 176:193
aanc <-
entity_donors %>%
slice(176:193) %>%
mutate(donor_name="Apartment Association of North Carolina PAC")
entity_donors %>%
rows_update(aanc, by = c("member", "district")) %>%
View()
View(entity_donors)
